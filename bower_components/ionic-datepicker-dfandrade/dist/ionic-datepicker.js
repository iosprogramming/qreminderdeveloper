angular.module("ionic-datepicker",["ionic","ionic-datepicker.templates"]).directive("ionicDatepicker",["$ionicPopup","$filter",function(e,t){return{restrict:"AE",replace:!0,scope:{date:"=",minDate:"=",maxDate:"=",popupTitle:"@",btnSetText:"@",btnSetType:"@",btnCloseText:"@",btnCloseType:"@",btnTodayShow:"@",btnTodayText:"@",btnTodayType:"@"},link:function(a,n,i){n.on("click",function(){function n(e){e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)}a.datePicker={date:new Date(a.date.getTime()),minDate:null,maxDate:null,popupTitle:angular.isDefined(a.popupTitle)?a.popupTitle:"Select date",btnCloseText:angular.isDefined(a.btnCloseText)?a.btnCloseText:"Close",btnSetText:angular.isDefined(a.btnSetText)?a.btnSetText:"Set",btnTodayText:angular.isDefined(a.btnTodayText)?a.btnTodayText:"Today",btnCloseType:angular.isDefined(a.btnCloseType)?a.btnCloseType:"button-default",btnSetType:angular.isDefined(a.btnSetType)?a.btnSetType:"button-positive",btnTodayType:angular.isDefined(a.btnTodayType)?a.btnTodayType:"button-default",btnTodayShow:angular.isDefined(a.btnTodayShow)?"true"===a.btnTodayShow:!0},a.datePicker.today=new Date,n(a.datePicker.date),n(a.datePicker.today),angular.isDefined(a.minDate)&&(a.datePicker.minDate=new Date(a.minDate.getTime()),n(a.datePicker.minDate)),angular.isDefined(a.maxDate)&&(a.datePicker.maxDate=new Date(a.maxDate.getTime()),n(a.datePicker.maxDate)),a.datePicker.dateSelected=new Date(a.datePicker.date.getTime()),a.datePicker.weekNames=[];for(var i=new Date("October 12, 2019 22:45:00"),d=0;7>d;d++){i.setDate(i.getDate()+1);var o=t("date")(i,"EEE");a.datePicker.weekNames.push(o)}a.updateWeeks=function(){a.datePicker.weeks=[];var e=new Date(a.datePicker.date.getTime());e.setDate(1);for(var n=t("date")(e,"EEE"),i=[],d=!1,o=0;o<a.datePicker.weekNames.length&&!d;o++)a.datePicker.weekNames[o]==n?d=!0:i.push(null);for(var r=e.getMonth();r==e.getMonth();)i.length==a.datePicker.weekNames.length&&(a.datePicker.weeks.push(i.slice()),i=[]),i.push(new Date(e.getTime())),e.setDate(e.getDate()+1);if(i.length>0){for(var o=i.length;o<a.datePicker.weekNames.length;o++)i.push(null);a.datePicker.weeks.push(i)}},a.updateWeeks(),a.isToday=function(e){return null!=e&&e.getTime()==a.datePicker.today.getTime()},a.isSelected=function(e){return null!=e&&e.getTime()==a.datePicker.dateSelected.getTime()},a.prevMonthAllowed=function(){var e=!0;return null!=a.datePicker.minDate&&a.datePicker.date.getMonth()<=a.datePicker.minDate.getMonth()&&(e=!1),e},a.nextMonthAllowed=function(){var e=!0;return null!=a.datePicker.maxDate&&a.datePicker.date.getMonth()>=a.datePicker.maxDate.getMonth()&&(e=!1),e},a.dayAllowed=function(e){var t=!0;return null!=e&&(null!=a.datePicker.minDate&&e.getTime()<a.datePicker.minDate.getTime()?t=!1:null!=a.datePicker.maxDate&&e.getTime()>a.datePicker.maxDate.getTime()&&(t=!1)),t},a.prevMonth=function(){a.datePicker.date.setMonth(a.datePicker.date.getMonth()-1),a.updateWeeks()},a.nextMonth=function(){a.datePicker.date.setMonth(a.datePicker.date.getMonth()+1),a.updateWeeks()},a.selectDate=function(e){if(null!=e&&a.dayAllowed(e)){a.datePicker.dateSelected=e;var t=a.datePicker.date.getMonth()!=e.getMonth();t&&(a.datePicker.date=new Date(e.getTime()),a.updateWeeks())}};var r=[];r.push({text:a.datePicker.btnCloseText,type:a.datePicker.btnCloseType}),a.datePicker.btnTodayShow&&r.push({text:a.datePicker.btnTodayText,type:a.datePicker.btnTodayType,onTap:function(e){e.preventDefault(),a.datePicker.today=new Date,n(a.datePicker.today),a.selectDate(new Date(a.datePicker.today.getTime()))}}),r.push({text:a.datePicker.btnSetText,type:a.datePicker.btnSetType,onTap:function(e){a.date=a.datePicker.dateSelected}}),e.show({templateUrl:"date-picker-modal.html",title:"<strong>"+a.datePicker.popupTitle+"</strong>",subTitle:"",scope:a,buttons:r})})}}}]);